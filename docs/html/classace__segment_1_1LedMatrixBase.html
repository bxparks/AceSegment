<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AceSegment: ace_segment::LedMatrixBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceSegment
   &#160;<span id="projectnumber">0.13.0</span>
   </div>
   <div id="projectbrief">A library for rendering seven segment LED displays using the TM1637, TM1638, MAX7219, HT16K33, or 74HC595 controller chips</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ace_segment</b></li><li class="navelem"><a class="el" href="classace__segment_1_1LedMatrixBase.html">LedMatrixBase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classace__segment_1_1LedMatrixBase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ace_segment::LedMatrixBase Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class that represents the abstraction of a particular LED display wiring, and knows how to turn off and turn on a specific group of LEDs with a specific pattern.  
 <a href="classace__segment_1_1LedMatrixBase.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LedMatrixBase_8h_source.html">LedMatrixBase.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ace_segment::LedMatrixBase:</div>
<div class="dyncontent">
<div class="center"><img src="classace__segment_1_1LedMatrixBase__inherit__graph.png" border="0" usemap="#aace__segment_1_1LedMatrixBase_inherit__map" alt="Inheritance graph"/></div>
<map name="aace__segment_1_1LedMatrixBase_inherit__map" id="aace__segment_1_1LedMatrixBase_inherit__map">
<area shape="rect" title="Class that represents the abstraction of a particular LED display wiring, and knows how to turn off a..." alt="" coords="5,143,220,170"/>
<area shape="rect" href="classace__segment_1_1LedMatrixDirect.html" title=" " alt="" coords="271,5,493,47"/>
<area shape="rect" href="classace__segment_1_1LedMatrixSingleHc595.html" title=" " alt="" coords="268,71,496,112"/>
<area shape="rect" href="classace__segment_1_1LedMatrixDirect.html" title="An LedMatrixBase that whose group pins and element pins are wired directly to the MCU." alt="" coords="271,136,493,177"/>
<area shape="rect" href="classace__segment_1_1LedMatrixDualHc595.html" title="An LedMatrix that whose group pins are attached to one 74HC595 shift register and the element pins ar..." alt="" coords="276,201,488,243"/>
<area shape="rect" href="classace__segment_1_1LedMatrixSingleHc595.html" title="An implementation of LedMatrixBase with an 74HC595 Shift Register chip on the segment pins,..." alt="" coords="271,267,493,308"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae46efc84d412faff4617fe461b912131"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#ae46efc84d412faff4617fe461b912131">LedMatrixBase</a> (uint8_t elementOnPattern, uint8_t groupOnPattern)</td></tr>
<tr class="separator:ae46efc84d412faff4617fe461b912131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c068db5e59b80d0884a1af616177f0e"><td class="memItemLeft" align="right" valign="top"><a id="a5c068db5e59b80d0884a1af616177f0e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#a5c068db5e59b80d0884a1af616177f0e">begin</a> () const</td></tr>
<tr class="memdesc:a5c068db5e59b80d0884a1af616177f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the pins for the given LED wiring. <br /></td></tr>
<tr class="separator:a5c068db5e59b80d0884a1af616177f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36c163f093b05a7a25daf40d5842186f"><td class="memItemLeft" align="right" valign="top"><a id="a36c163f093b05a7a25daf40d5842186f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#a36c163f093b05a7a25daf40d5842186f">end</a> () const</td></tr>
<tr class="memdesc:a36c163f093b05a7a25daf40d5842186f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn off the pins by doing the opposite of <a class="el" href="classace__segment_1_1LedMatrixBase.html#a5c068db5e59b80d0884a1af616177f0e" title="Configure the pins for the given LED wiring.">begin()</a>. <br /></td></tr>
<tr class="separator:a36c163f093b05a7a25daf40d5842186f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d2bc50b50ab4b2c16c1ef53b3397d2"><td class="memItemLeft" align="right" valign="top"><a id="ad9d2bc50b50ab4b2c16c1ef53b3397d2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#ad9d2bc50b50ab4b2c16c1ef53b3397d2">draw</a> (uint8_t, uint8_t) const</td></tr>
<tr class="memdesc:ad9d2bc50b50ab4b2c16c1ef53b3397d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write element patterns for the given group. <br /></td></tr>
<tr class="separator:ad9d2bc50b50ab4b2c16c1ef53b3397d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392418ec3a4e763920e21acc763e8848"><td class="memItemLeft" align="right" valign="top"><a id="a392418ec3a4e763920e21acc763e8848"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#a392418ec3a4e763920e21acc763e8848">disableGroup</a> (uint8_t) const</td></tr>
<tr class="memdesc:a392418ec3a4e763920e21acc763e8848"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the elements of given group. <br /></td></tr>
<tr class="separator:a392418ec3a4e763920e21acc763e8848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2443123d487980dc87a59dc61f0c3bb"><td class="memItemLeft" align="right" valign="top"><a id="ae2443123d487980dc87a59dc61f0c3bb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#ae2443123d487980dc87a59dc61f0c3bb">enableGroup</a> (uint8_t) const</td></tr>
<tr class="memdesc:ae2443123d487980dc87a59dc61f0c3bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the elements of given group. <br /></td></tr>
<tr class="separator:ae2443123d487980dc87a59dc61f0c3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5fb153442f0504f93461b9d9f6f9a3e"><td class="memItemLeft" align="right" valign="top"><a id="aa5fb153442f0504f93461b9d9f6f9a3e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__segment_1_1LedMatrixBase.html#aa5fb153442f0504f93461b9d9f6f9a3e">clear</a> () const</td></tr>
<tr class="memdesc:aa5fb153442f0504f93461b9d9f6f9a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear everything. <br /></td></tr>
<tr class="separator:aa5fb153442f0504f93461b9d9f6f9a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:af1c88be3509cc83381c150a1f6d67c00"><td class="memItemLeft" align="right" valign="top"><a id="af1c88be3509cc83381c150a1f6d67c00"></a>
uint8_t const&#160;</td><td class="memItemRight" valign="bottom"><b>mElementXorMask</b></td></tr>
<tr class="separator:af1c88be3509cc83381c150a1f6d67c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b61fe351f57e406355e89a7510ea31"><td class="memItemLeft" align="right" valign="top"><a id="a56b61fe351f57e406355e89a7510ea31"></a>
uint8_t const&#160;</td><td class="memItemRight" valign="bottom"><b>mGroupXorMask</b></td></tr>
<tr class="separator:a56b61fe351f57e406355e89a7510ea31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that represents the abstraction of a particular LED display wiring, and knows how to turn off and turn on a specific group of LEDs with a specific pattern. </p>
<p>This class is conceptually stateless. The API exposes a class that does not remember the LED element patterns that is currently being displayed. (However, an implementation class may need to cache a small bit of information to implement this API abstraction.)</p>
<p>I have provided 3 wiring implementations:</p>
<ul>
<li><a class="el" href="classace__segment_1_1LedMatrixDirect.html" title="An LedMatrixBase that whose group pins and element pins are wired directly to the MCU.">LedMatrixDirect</a><ul>
<li>The element and group pins are directly attached to GPIO pins on the microcontroller.</li>
</ul>
</li>
<li><a class="el" href="classace__segment_1_1LedMatrixSingleHc595.html" title="An implementation of LedMatrixBase with an 74HC595 Shift Register chip on the segment pins,...">LedMatrixSingleHc595</a><ul>
<li>The element pins are attached to one 74HC595 shift register chip, accessed through SPI (either software or hardware).</li>
<li>The group pins are directly attached to GPIO pins.</li>
</ul>
</li>
<li><a class="el" href="classace__segment_1_1LedMatrixDualHc595.html" title="An LedMatrix that whose group pins are attached to one 74HC595 shift register and the element pins ar...">LedMatrixDualHc595</a><ul>
<li>Both the element and group pins are controlled by 74HC595 chips using SPI (software or hardware).</li>
</ul>
</li>
</ul>
<p>In most cases, the resistors will be on the segments to control the current on each segment, so the segments become elements and the digits become the groups.</p>
<p>If the resistors are on the digits, then the digits become the elements and the segments become the groups. This configuration is not very useful and has not been tested very much.</p>
<p>The elementOnPattern and groupOnPattern are the bit patterns that activate the element and group. For example, a Common Cathode LED module places the negative end of the LED on the group pin and the element pins are positive. So elementOnPattern should be kActiveHighPattern and groupOnPattern should be kActiveLowPattern. However, if a driver transitor is placed on the group pins to handle the higher current, then it inverts the logic on the group pins, so groupOnPattern must be set to kActiveHighPattern.</p>
<p>The elementPattern and groupOnPattern are compile-time constants so these parameters could be moved into the template parameters. When I did that, the flash size when down by only ~20 bytes on AVR, and ~40 bytes on an STM32. I decided to leave them as instance variables, because the decrease in readability of the code didn't seem worth 20 bytes. </p>

<p class="definition">Definition at line <a class="el" href="LedMatrixBase_8h_source.html#l00079">79</a> of file <a class="el" href="LedMatrixBase_8h_source.html">LedMatrixBase.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae46efc84d412faff4617fe461b912131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae46efc84d412faff4617fe461b912131">&#9670;&nbsp;</a></span>LedMatrixBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ace_segment::LedMatrixBase::LedMatrixBase </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>elementOnPattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>groupOnPattern</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elementOnPattern</td><td>bit pattern that turns on the elements on group </td></tr>
    <tr><td class="paramname">groupOnPattern</td><td>bit pattern that turns on the groups </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LedMatrixBase_8h_source.html#l00086">86</a> of file <a class="el" href="LedMatrixBase_8h_source.html">LedMatrixBase.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/brian/src/AceSegment/src/ace_segment/scanning/<a class="el" href="LedMatrixBase_8h_source.html">LedMatrixBase.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
